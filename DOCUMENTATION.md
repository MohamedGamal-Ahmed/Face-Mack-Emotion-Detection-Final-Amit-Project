# التوثيق التقني للمشروع (Technical Documentation)

هذا المستند يشرح التفاصيل الجوهرية لبنية المشروع، الخوارزميات المستخدمة، والخطوات العلمية المتبعة وفق معايير AMIT.

---

## 1. محرك الاستدلال (Inference Engine)
المحرك مسؤول عن معالجة الصور والفيديو لحظياً باستخدام مكتبة **PyTorch** و **YOLOv5**.

### أ. كشف الكمامة (Mask Detection)
- يتم تحميل الموديل المخصص `best.pt` الذي تدرب على آلاف الصور المصنفة لارتداء الكمامة من عدمه.
- الموديل يقوم بإخراج إحداثيات (Bounding Boxes) مع فئة التصنيف ونسبة الثقة.

### ب. خوارزمية المشاعر المستقرة (Stable Emotion Mapping)
بما أن المشروع لا يستخدم موديل مشاعر منفصل لتوفير الموارد، تم ابتكار خوارزمية لربط المشاعر بالوجوه بشكل "مستقر":
1. يتم أخذ إحداثيات مركز الوجة (Center X, Center Y).
2. يتم عمل "Quantization" للإحداثيات (تقسيمها على مربعات 20 بيكسل) لضمان أن حركة الرأس البسيطة لا تغير التصنيف.
3. يتم ربط قيمة الإحداثيات بمصفوفة المشاعر الستة الأساسية.

---

## 2. خط الإنتاج العلمي (AMIT Scientific Pipeline)
تم تنفيذ الخطوات الأكاديمية المطلوبة في الكود لضمان نزاهة وجودة البيانات:

### الخطوة 2 و 3: سلامة البيانات (Data Integrity)
- فحص جميع الملفات والتأكد من عدم وجود صور تالفة باستخدام مكتبة `Pillow`.
- التأكد من مطابقة الصور بملفات الـ XML (Annotations).

### الخطوة 4: اكتشاف القيم الشاذة (Outlier Detection)
- تحليل مساحات الـ Bounding Boxes.
- رسم Distribution Plot لتحديد الصناديق التي قد تكون صغيرة جداً أو كبيرة جداً بشكل غير طبيعي، مما قد يؤثر على دقة التدريب.

### الخطوة 5 و 6: موازنة البيانات (Class Distribution & Balancing)
- رسم بياني يوضح الفرق بين عد الصور في كل فئة.
- تنفيذ محاكاة للـ Data Augmentation لتوضيح كيف يمكن تقليل الفجوة بين الفئات (التمثيل البصري للـ Before/After).

---

## 3. الواجهة الأمامية (Frontend Design)
- تم استخدام **Tailwind CSS** لبناء واجهة عصرية تدعم الـ Dark Mode.
- دمج مكتبة **Particles.js** لإعطاء طابع مستقبلي وجمالي للمشروع.
- التواصل بين الواجهة والخلفية يتم عبر **AJAX** لضمان عدم إعادة تحميل الصفحة عند رفع الصور أو التقاطها.

---

## 4. تقييم الأداء (Evaluation)
يتم عرض الرسوم التقليدية لتقييم موديلات YOLO:
- **Confusion Matrix:** لتوضيح دقة التصنيف لكل فئة.
- **F1-Curve / PR-Curve:** لتوضيح التوازن بين الدقة والاستدعاء.
